---
title: 'AtomVM: ESP32 上から Elixir を動かすための最低限ツール'
tags:
  - Elixir
  - ESP32
  - ESP-IDF
  - AtomVM
  - esptool
private: false
updated_at: '2025-12-12T20:50:54+09:00'
id: fd5ae0e0575c28a57f0d
organization_url_name: fukuokaex
slide: false
ignorePublish: false
---
### はじめに

軽量な [BEAM] 実装である [AtomVM] を使って、[ESP32] 上で [Elixir] プログラムを動かす際に必要となる道具を、簡単に整理しておこうと思います。

![piyopiyo-board-2025-12.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/82804/31d01365-5ac5-45dd-a125-bee49ea93d57.png)

※ 写真はイメージです

## 開発用 OS

> A computer running MacOS or Linux (Windows support is not currently supported)

AtomVM の公式ドキュメントでは、Linux または macOS が前提とされています。

https://doc.atomvm.org/latest/getting-started-guide.html#esp32-requirements

## Erlang / Elixir

ホストマシン側には、Erlang / Elixir の開発環境が必要になります。

`asdf` や `mise` などのバージョン管理ツールを使ってインストールするのが一般的です。

私は執筆時点では `mise` を使っています。

https://mise.jdx.dev/lang/elixir.html

## Python 3

ESP-IDF および esptool は、どちらも Python 3 に依存しています。

私はPython も `mise` でインストールしています。

https://docs.espressif.com/projects/esp-idf/en/stable/esp32/get-started/linux-macos-setup.html

https://docs.espressif.com/projects/esptool/en/latest/esp32/installation.html

## AtomVM 本体

ESP32 上で Elixir を動かすには、ESP32 向けにビルドされた AtomVM のファームウェアが必要です。

利用方法は、大きく分けて次の 2 通りあります。


* **ビルド済みイメージを使う**
  AtomVM の Releases ページからダウンロードしたバイナリイメージをそのまま ESP32 に書き込む

* **ソースコードからビルドする**
  GitHub 上の AtomVM リポジトリを clone し、ESP-IDF の環境から `idf.py build` することで自分の環境向けのファームウェアを作る

どちらの方法でも、最終的には `atomvm-esp32.bin` のようなイメージをフラッシュして利用します。

https://doc.atomvm.org/latest/getting-started-guide.html#getting-started-on-the-esp32-platform

## ESP-IDF

ESP-IDF は、ESP32 向けのツールチェインや SDK 一式を含む公式フレームワークです。  
AtomVM の ESP32 ポートも、この ESP-IDF 上でビルドされます。

公式ドキュメントで案内されている基本的な流れは、次のとおりです。

1. 必要なホスト依存パッケージをインストール
2. `install.sh` でツール類をインストール
3. 作業ディレクトリで `export.sh` を実行して環境変数を設定
4. プロジェクトディレクトリで `idf.py build` / `idf.py flash`

AtomVM をソースからビルドする場合も、基本的にはこの流れに沿います。

https://docs.espressif.com/projects/esp-idf/en/stable/esp32/get-started/linux-macos-setup.html

## esptool

`esptool.py` は、ESP32 の ROM ブートローダとシリアル経由で通信し、フラッシュ操作などを行うためのツールです。

AtomVM のファームウェアイメージや、`.avm` ファイルを ESP32 に書き込む際に使用されます。

https://docs.espressif.com/projects/esptool/en/latest/esp32/installation.html

## シリアルターミナル

ESP32 上で動作する AtomVM の起動ログや、`IO.puts/1` などの出力を確認するには、USB シリアルポートに接続できるターミナルソフトが必要です。

`screen`、`minicom`、`picocom` などの一般的なシリアルターミナルで問題ありません。

ESP-IDF を利用している場合は、ESP-IDF 付属のシリアルモニタを `idf.py monitor` コマンドで起動することもできます。

```bash
idf.py -p /dev/ttyACM0 -b 115200 monitor
```

Linux では、`dmesg | grep tty` などを使って、接続した ESP32 に対応するデバイス名（例: `/dev/ttyACM0`）を確認してから利用するとよいです。

![atomvm-hello-nif.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/82804/8c944a8b-d1f3-4a72-b98a-565283e9509d.png)

## おわりに

AtomVM で ESP32 上から Elixir を動かすために最低限そろえておきたい道具をまとめてみました。

* OS（Linux / macOS）
* [Erlang] / [Elixir]
* [Python]
* [AtomVM]（自分でソースコードからビルド または ビルド済イメージ）
* [ESP-IDF]
* [esptool]
* シリアルターミナル（[picocom] など）

これらがそろえば、あとはなんでもできるはず。

:tada::tada::tada:

https://piyopiyoex.connpass.com/event/377298/

[AtomVM]: https://github.com/atomvm/AtomVM
[Elixir]: https://hexdocs.pm/elixir/introduction.html
[Nerves]: https://github.com/nerves-project
[BEAM]: https://www.google.com/search?q=erlang+virtual+machine
[Seeed Studio XIAO ESP32-S3]: https://wiki.seeedstudio.com/xiao_esp32s3_getting_started/
[ESP32]: https://www.google.com/search?q=ESP32%E3%81%A8%E3%81%AF
[ESP32-S3]: https://www.espressif.com/ja-jp/products/socs/esp32-s3
[AtomVM/releases]: https://github.com/atomvm/AtomVM/releases
[AtomVM/doc/getting-started]: https://doc.atomvm.org/latest/getting-started-guide.html#getting-started-on-the-esp32-platform
[Blinky]: https://github.com/atomvm/atomvm_examples/tree/master/elixir/Blinky
[Erlang]: https://www.erlang.org/doc/readme.html
[ESP-IDF]: https://docs.espressif.com/projects/esp-idf/en/stable/esp32s3/get-started/
[esptool]: https://docs.espressif.com/projects/esptool/en/latest/esp32/
[screen]: https://www.google.com/search?q=screen+linux
[minicom]: https://www.google.com/search?q=minicom+linux
[picocom]: https://www.google.com/search?q=picocom+linux
[AtomVM/releases]: https://github.com/atomvm/AtomVM/releases
[exatomvm]: https://github.com/atomvm/exatomvm
[python]: http://google.com/search?q=python3
